;// m4bueno1.ajk
;// Un programa bueno para ver el procesamiento
;// de expresiones con int y char
;procedure imprimeChar( c (char) in )
    etiqv imprimeChar
    paramb c
    ponerbase
;int: valorc;
    locali valorc
;{
;    writeln( c );
    valord c
    escribirb
    escribirln
;    valorc := c;
    valori valorc
    valord c
    byteaint
    :=
;    writeln( valorc );
    valord valorc
    escribiri
    escribirln
;    return;
    ir-a #imprimeChar
;}
    ir-a #EXE001
    etiq #imprimeChar
    desapilar 4
    cogerbase
    ret 1
    fin imprimeChar
;function leeChars() return (int)
    etiqi leeChars
    ponerbase
;char: c;
    localb c
;int: sumaCodigos;
    locali sumaCodigos
;{
;    sumaCodigos := 0;
    valori sumaCodigos
    insi 0
    :=
;    do {
    etiq #ET0
;        c := readchar();
    valori c
    leerb
    :=b
;        imprimeChar( c );
    valord c
    llamar imprimeChar
;        sumaCodigos := sumaCodigos + c;
    valori sumaCodigos
    valord sumaCodigos
    valord c
    byteaint
    +
    :=
;    } while( c != '$' );
    valord c
    byteaint
    insb '$'
    byteaint
    !=
    si-cierto-ir-a #ET0
;    sumaCodigos := sumaCodigos - c;
    valori sumaCodigos
    valord sumaCodigos
    valord c
    byteaint
    -
    :=
;    return sumaCodigos;
    valori leeChars
    valord sumaCodigos
    :=
    ir-a #leeChars
;}
    ir-a #EXE001
    etiq #leeChars
    desapilar 5
    cogerbase
    ret
    fin leeChars
;procedure main()
    etiqv main
    ponerbase
;int: suma;
    locali suma
;{
;    suma := leeChars();
    valori suma
    insi
    llamar leeChars
    :=
;    writeln( suma );
    valord suma
    escribiri
    escribirln
;    return;
    ir-a #main
;}
    ir-a #EXE001
    etiq #main
    desapilar 4
    cogerbase
    ret
    fin main
    inicio
    llamar main
    fin
    etiq #EXE001
    escribirs "Error EXE001"
    escribirln
    escribirs "Procedimiento o funcion no retorna"
    escribirln
    escribirs "Programa terminado"
    escribirln
    fin
    etiq #EXE002
    escribirs "Error EXE002"
    escribirln
    escribirs "No existe caso valido"
    escribirln
    escribirs "Programa terminado"
    escribirln
    fin
